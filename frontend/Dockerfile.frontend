# 第一階段：構建 Vue.js 應用程式
FROM node:18-alpine AS build-stage

# 設定工作目錄
WORKDIR /app/frontend

# 複製 package.json 和 package-lock.json (或 yarn.lock)
COPY frontend/package*.json ./

# 安裝前端依賴
RUN npm install

# 複製前端應用程式程式碼
COPY frontend/ .

# 構建 Vue.js 應用程式
# 這裡假設你的 build 命令是 'npm run build'，會將靜態檔案輸出到 'dist' 目錄
RUN npm run build

# 第二階段：僅用於開發環境，不使用 Nginx
# 暴露 Vite 開發伺服器的埠號
EXPOSE 5173

# 定義啟動前端開發服務的命令
# 這裡假設 entrypoint.sh 會啟動 Vite 開發伺服器
ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]
